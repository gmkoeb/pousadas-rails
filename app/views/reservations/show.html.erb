<h1>Reserva <%= @reservation.code %></h1>
<p>Status da Reserva: <%= t(@reservation.status) %></p>
<p>Quarto Reservado: <%= @reservation.room.name %></p>
<% if @reservation.finished? %>
  <ul>
    <li><p>Quarto: <%= @reservation.room.name %></p></li>
    <li><p>Forma de Pagamento Escolhida: <%= @reservation.payment_method %></p></li>
    <li><p>Data de Entrada: <%= I18n.localize(@reservation.check_in.in_time_zone('America/Sao_Paulo')) %></p></li>
    <li><p>Data de Saída: <%= I18n.localize(@reservation.check_out.in_time_zone('America/Sao_Paulo')) %></p></li>
    <li><p>Valor Total da Reserva: R$ <%= @reservation.total_price %></p></li>
  </ul>
<% end %>

<% if @reservation.active? %>
  <p>Data de Entrada: <%= I18n.localize(@reservation.check_in.in_time_zone('America/Sao_Paulo')) %></p>
  <p>Data de Saída: <%= I18n.localize(@reservation.check_out.in_time_zone('America/Sao_Paulo')) %></p>
<% end %>

<% if @reservation.canceled? %>
  <p>Data do cancelamento: <%= I18n.localize(@reservation.updated_at.to_date) %></p>
<% end %>
<% if @reservation.pending?  && current_user != @room.inn.user %>
  <%= render 'reservation_details', room: @room, reservation: @reservation %>
  <% if @reservation.check_in >= a_week_from_check_in_date(@reservation.check_in)%>
    <p>Você poderá cancelar sua reserva em até 7 dias antes da data de check-in</p>
    <%= button_to 'Cancelar Reserva', cancel_reservation_path(@reservation), {method: 'patch', class:"btn btn-danger text-white mb-2"} %>
  <% end %>
<% end %>

<% if current_user == @room_owner %>
  <% if @reservation.pending? %>
    <%= render 'reservation_details', room: @room, reservation: @reservation %>
    <%= button_to 'Realizar Check-in', check_in_reservation_path(@reservation), {method: 'patch', class:"btn btn-success text-white mb-2"} %>
    <%= button_to 'Cancelar Reserva', cancel_reservation_path(@reservation), {method: 'patch', class:"btn btn-danger text-white mb-2"} %>
  <% end %>

  <% if @reservation.active? %>
    <%= link_to 'Realizar Check-Out', check_out_form_reservation_path(@reservation) %>
  <% end %>
<% end %>

