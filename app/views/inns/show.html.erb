<article>
  <section>
    <ul class="inn-details d-flex flex-wrap gap-5 mx-auto border rounded-4 flex-column p-0 mb-5">
      <%= image_tag 'inn.jpg', class: "inn-image h-25 py-0 my-0" %>
      <h1 class="text-center py-0 my-0"><%= @inn.brand_name %></h1>
      <h2 class="text-center py-0 my-0">Detalhes da pousada</h2>
      <div class="px-5">
        <h4><i class="fa-solid fa-phone"></i> Informações Para Contato</h4>
        <li><%= Inn.human_attribute_name(:phone) %>: <%= @inn.phone %></li>
        <li><%= Inn.human_attribute_name(:email)%>: <%= @inn.email %></li>
      </div>
      <div class="px-5">
        <h4>   
          <i class="fa-solid fa-location-dot"></i> Localização
        </h4>
        <li>
          <%= Inn.human_attribute_name(:address)%> completo: <%= @inn.full_address %>
        </li>
        <li><%= Inn.human_attribute_name(:zip_code)%>: <%= @inn.zip_code %></li>
        <li><%= Inn.human_attribute_name(:description)%>: <%= @inn.description %></li>
      </div>
      <div class="px-5">
        <h4 class="mb-3"><i class="fa-solid fa-money-check-dollar"></i> <%= Inn.human_attribute_name(:payment_methods)%></h4>
        <% eval(@inn.payment_methods).each do |method| %>
          <li class="mb-1">
            <% case method %>
              <% when 'Dinheiro' %>
              <i class="fa-solid fa-money-bill-wave" style="color: #18ec1f;"></i> 
              <% when 'Cartão de crédito', 'Cartão de débito' %>
              <i class="fa-regular fa-credit-card"></i>
              <% when 'PIX' %>
              <i class="fa-brands fa-pix" style="color: #44ab9a;"></i>
            <%end%>
            <%= method %>
          </li>
        <%end%>
      </div>
      <div class="px-5">
        <h4><i class="fa-solid fa-clipboard-question"></i> Informações Adicionais</h4>
        <li>
          <p><%= accepts_pets?(@inn.accepts_pets?) %></p>
        </li>
        <li>
          <p><%= Inn.human_attribute_name(:terms_of_service)%>: <%= @inn.terms_of_service %></p>
        </li>
        <li>
          <p><%= Inn.human_attribute_name(:check_in_check_out_time)%>: <%= @inn.check_in_check_out_time.strftime("%H:%M")%></p>
        </li>
      </div>
    </ul>
    <% if @inn.rooms.present? %>  
      <h2 class="text-center mb-4"><%= Room.model_name.human(count: @rooms.count) %></h2>
    <% end %>   
  </section>
<% if current_user && current_user.inn && @inn == current_user.inn %>
  <aside class="admin-control text-center">
    <h3>Painel de Controle </h3> <span class="fw-bold text-danger">*Essas informações não aparecem para os outros usuários</span>
    <h5 class="mt-3"><%= Inn.human_attribute_name(:corporate_name) %>: <%= @inn.corporate_name %></h5>
    <h5><%= Inn.human_attribute_name(:brand_name) %>: <%= @inn.brand_name %></h5>
    <h5><%= Inn.human_attribute_name(:registration_number) %>: <%= @inn.registration_number %></h5>
    <div>
      <% if @inn.draft? %>
        <p class="fw-bold text-danger">**ATENÇÃO: Ao publicar a pousada ela poderá ser visualizada por outros usuários.</p>
        <%= button_to 'Publicar pousada', publish_inn_path(@inn.id), {method: 'patch', class:"btn btn-info text-white mb-2"}%>
      <% else %>
        <%= button_to 'Esconder pousada', draft_inn_path(@inn.id), {method: 'patch', class:"btn btn-dark text-white mb-2"}%>
      <% end %>
      <%= link_to 'Editar Pousada', edit_inn_path(@inn), class:"btn btn-info text-white mb-2"%>
      <%= link_to 'Cadastrar Quarto', new_inn_room_path(@inn), class:"btn btn-info text-white mb-2" %> 
    </div>
  </aside>
  <section class="d-flex flex-wrap gap-3 justify-content-center mb-5">
    <% if @inn.rooms.empty? %>
      <h2>Você ainda não cadastrou um quarto. <%= link_to 'Clique aqui para cadastrar um.', new_inn_room_path(@inn)%></h2>
    <% else %>
      <% @inn.rooms.each do |room| %>
        <div class="room-card">
          <%= link_to room_path(room) do%>
            <%= render 'rooms/room_details', room: room, inn: @inn %>
          <% end %> 
        </div> 
      <%end%> 
    <%end%>
  </section>
<%end%>

<% if current_user.nil? || current_user.inn != @inn %>
  <section class="d-flex flex-wrap gap-3 justify-content-center mb-5">
    <% if @rooms.present? %>
      <% @rooms.each do |room| %>
        <div class="room-card">
          <%= link_to room_path(room) do %>
            <ul class="px-0">  
              <%= render 'rooms/room_details', room: room, inn: @inn %>
            </ul>     
          <% end %> 
        </div> 
      <%end%> 
    <% else %>
      <h2>Nenhum quarto dessa pousada está disponível para reservas no momento.</h2>
    <%end%>
  </section>
<% end %>
